<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warning: Entering The Last Axiom Universe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(45deg, #0a0a0f 0%, #1a1a2e 25%, #16213e 50%, #1a1a2e 75%, #0a0a0f 100%);
            min-height: 100vh;
            color: #e8e8e8;
            overflow-x: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Quantum field background effect */
        .quantum-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(255, 0, 0, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(138, 43, 226, 0.1) 0%, transparent 50%);
            animation: quantum-pulse 20s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes quantum-pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        /* Warning klaxon effect */
        .warning-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.1);
            opacity: 0;
            pointer-events: none;
            z-index: 1;
            animation: warning-pulse 3s ease-in-out infinite;
        }

        @keyframes warning-pulse {
            0%, 90%, 100% { opacity: 0; }
            5%, 15% { opacity: 0.3; }
        }

        /* Main content */
        .warning-container {
            position: relative;
            z-index: 10;
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
        }

        .warning-header {
            background: rgba(255, 0, 0, 0.2);
            border: 3px solid #ff0000;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            animation: border-pulse 2s ease-in-out infinite;
        }

        @keyframes border-pulse {
            0%, 100% { border-color: #ff0000; }
            50% { border-color: #ff6b6b; }
        }

        .warning-title {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: bold;
            color: #ff4757;
            margin-bottom: 1rem;
            text-shadow: 0 0 20px rgba(255, 71, 87, 0.8);
            animation: title-glow 2s ease-in-out infinite alternate;
        }

        @keyframes title-glow {
            0% { text-shadow: 0 0 20px rgba(255, 71, 87, 0.8); }
            100% { text-shadow: 0 0 40px rgba(255, 71, 87, 1), 0 0 60px rgba(255, 71, 87, 0.6); }
        }

        .warning-subtitle {
            font-size: 1.3rem;
            color: #ffd700;
            font-style: italic;
            margin-bottom: 2rem;
            animation: subtitle-flicker 4s ease-in-out infinite;
        }

        @keyframes subtitle-flicker {
            0%, 96%, 100% { opacity: 1; }
            97% { opacity: 0.7; }
            98% { opacity: 1; }
            99% { opacity: 0.8; }
        }

        /* Warning content */
        .warning-content {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .warning-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: scanner 5s ease-in-out infinite;
        }

        @keyframes scanner {
            0% { left: -100%; }
            50% { left: -100%; }
            100% { left: 100%; }
        }

        .author-warning {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #e8e8e8;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }

        .highlight {
            color: #ff6b6b;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .emphasis {
            color: #ffd700;
            font-style: italic;
        }

        .cosmic-disclaimer {
            background: rgba(138, 43, 226, 0.15);
            border: 2px solid rgba(187, 134, 252, 0.4);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            font-size: 1rem;
            line-height: 1.6;
            position: relative;
        }

        .cosmic-disclaimer::before {
            content: "⚠️";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #1a1a2e;
            padding: 0 15px;
            font-size: 1.5rem;
        }

        /* IP tracking notice */
        .privacy-notice {
            background: rgba(0, 100, 200, 0.1);
            border: 1px solid rgba(100, 181, 246, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2rem 0;
            font-size: 0.9rem;
            color: #b8b8b8;
        }

        .privacy-notice h4 {
            color: #64b5f6;
            margin-bottom: 0.5rem;
        }

        /* Entry buttons */
        .entry-buttons {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .entry-button {
            display: inline-flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1.5rem 2.5rem;
            border: 3px solid transparent;
            border-radius: 15px;
            color: #e8e8e8;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .enter-button {
            background: linear-gradient(45deg, rgba(255, 71, 87, 0.3), rgba(255, 107, 107, 0.3));
            border-color: #ff4757;
        }

        .enter-button:hover {
            background: linear-gradient(45deg, rgba(255, 71, 87, 0.6), rgba(255, 107, 107, 0.6));
            border-color: #ff6b6b;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 71, 87, 0.4);
        }

        .escape-button {
            background: linear-gradient(45deg, rgba(100, 100, 100, 0.3), rgba(150, 150, 150, 0.3));
            border-color: #888;
        }

        .escape-button:hover {
            background: linear-gradient(45deg, rgba(100, 100, 100, 0.6), rgba(150, 150, 150, 0.6));
            border-color: #aaa;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(100, 100, 100, 0.4);
        }

        .button-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* Loading state */
        .entering {
            pointer-events: none;
            opacity: 0.7;
        }

        .entering .enter-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: button-spin 1s linear infinite;
            transform: translate(-50%, -50%);
        }

        @keyframes button-spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Fun facts */
        .author-facts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .fact-card {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #64b5f6;
            padding: 1rem;
            border-radius: 0 10px 10px 0;
            font-size: 0.95rem;
            color: #d0d0d0;
            position: relative;
        }

        .fact-card::before {
            content: attr(data-icon);
            position: absolute;
            top: -8px;
            left: -8px;
            background: #1a1a2e;
            padding: 4px;
            border-radius: 50%;
            font-size: 1rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .warning-container {
                padding: 1rem;
            }
            
            .entry-buttons {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }
            
            .entry-button {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .author-facts {
                grid-template-columns: 1fr;
            }
        }

        /* Easter egg */
        .konami-activated {
            animation: reality-shift 0.5s ease-in-out;
            filter: hue-rotate(180deg) saturate(2);
        }

        @keyframes reality-shift {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.05) rotate(-1deg); }
            75% { transform: scale(0.95) rotate(1deg); }
        }

        /* Fireworks overlay */
        .fireworks-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .fireworks-overlay.active {
            opacity: 1;
        }

        .firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: explode 2s ease-out forwards;
        }

        .firework-trail {
            position: absolute;
            width: 2px;
            height: 60px;
            animation: trail 0.8s ease-out forwards;
        }

        @keyframes trail {
            0% {
                height: 0;
                opacity: 1;
            }
            100% {
                height: 60px;
                opacity: 0;
            }
        }

        @keyframes explode {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(3) rotate(360deg);
                opacity: 0;
            }
        }

        .sparkle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: radial-gradient(circle, #fff, #ffd700);
            border-radius: 50%;
            animation: sparkle 1.5s ease-out forwards;
        }

        @keyframes sparkle {
            0% {
                transform: scale(0) translate(0, 0);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(1.5) translate(var(--dx, 0), var(--dy, 0));
                opacity: 0;
            }
        }

        /* Success message enhancement */
        .success-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            animation: success-burst 1s ease-out;
        }

        @keyframes success-burst {
            0% { opacity: 0; transform: scale(0); }
            30% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0; transform: scale(2); }
        }

        /* Special popup message for advanced users */
        .advanced-user-popup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 40, 0.95));
            border: 3px solid #00ff88;
            border-radius: 15px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5), inset 0 0 20px rgba(0, 255, 136, 0.1);
            backdrop-filter: blur(15px);
            z-index: 10000;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.3);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            animation: matrix-glow 2s ease-in-out infinite alternate;
        }

        .advanced-user-popup.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .advanced-user-popup.hide {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.3);
        }

        @keyframes matrix-glow {
            0% { 
                box-shadow: 0 0 30px rgba(0, 255, 136, 0.5), inset 0 0 20px rgba(0, 255, 136, 0.1);
                border-color: #00ff88;
            }
            100% { 
                box-shadow: 0 0 50px rgba(0, 255, 136, 0.8), inset 0 0 30px rgba(0, 255, 136, 0.2);
                border-color: #44ffaa;
            }
        }

        .popup-header {
            color: #00ff88;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.8);
            font-family: 'Courier New', monospace;
        }

        .popup-message {
            color: #e0e0e0;
            font-size: 1rem;
            line-height: 1.6;
            text-align: center;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.5px;
        }

        .popup-number {
            color: #00ff88;
            font-weight: bold;
            font-size: 1.1rem;
            text-shadow: 0 0 5px rgba(0, 255, 136, 0.6);
        }

        .popup-timer {
            position: absolute;
            top: -15px;
            right: 15px;
            background: #00ff88;
            color: black;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <!-- Background effects -->
    <div class="quantum-field"></div>
    <div class="warning-flash"></div>
    
    <!-- Fireworks overlay for Konami code -->
    <div class="fireworks-overlay" id="fireworksOverlay"></div>

    <!-- Main warning container -->
    <div class="warning-container" id="warningContainer">
        <!-- Warning header -->
        <div class="warning-header">
            <h1 class="warning-title">⚠️ REALITY DISTORTION WARNING ⚠️</h1>
            <p class="warning-subtitle">You are about to enter a universe where the laws of physics are... negotiable</p>
        </div>

        <!-- Warning content -->
        <div class="warning-content">
            <div class="author-warning">
                <p><strong class="highlight">ATTENTION:</strong> The author Derek Devon is not a normal person.</p>
                
                <p>He was raised on a steady diet of <span class="emphasis">Star Trek</span> reruns, 
                <span class="emphasis">Twilight Zone</span> marathons, and enough <span class="emphasis">Isaac Asimov</span> 
                to convince him that robots will eventually want to discuss philosophy with us over coffee.</p>
                
                <p>Derek also believes that <span class="highlight">sailing around the world</span> in a 41-foot boat 
                is a perfectly reasonable way to test whether reality behaves differently when you're completely 
                surrounded by water. He calls this "research."</p>
            </div>

            <div class="author-facts">
                <div class="fact-card" data-icon="🚀">
                    <strong>Side Effects:</strong> May cause spontaneous questioning of fundamental constants
                </div>
                <div class="fact-card" data-icon="🤖">
                    <strong>Warning:</strong> Contains AI characters with better social skills than most humans
                </div>
                <div class="fact-card" data-icon="⚡">
                    <strong>Caution:</strong> Physics may behave differently after reading
                </div>
                <div class="fact-card" data-icon="💫">
                    <strong>Note:</strong> Author genuinely believes love might be a cosmic force
                </div>
            </div>

            <div class="cosmic-disclaimer">
                <p><strong>COSMIC DISCLAIMER:</strong> The following website contains 15 interconnected stories where:</p>
                <ul style="text-align: left; margin: 1rem 0; padding-left: 2rem;">
                    <li>Professors discover that π might not always equal 3.14159...</li>
                    <li>Pac-Man becomes humanity's first contact with cosmic intelligence</li>
                    <li>Golf putts refuse to follow curved spacetime</li>
                    <li>Nuclear physicists fall in love while the universe gets a software update</li>
                    <li>Reality itself starts taking suggestions</li>
                </ul>
                <p><em>Reader discretion is advised. Side effects may include: existential wonder, 
                uncontrollable theorizing about consciousness, and the sudden urge to look up at the stars 
                and wonder if they're looking back.</em></p>
            </div>
        </div>

        <!-- Privacy notice -->
        <div class="privacy-notice">
            <h4>🌍 Geographic Analytics Notice</h4>
            <p>This website collects visitor IP addresses for geographic analytics purposes only. 
            This helps Derek understand where in the world fellow cosmic travelers are located 
            (by region/country, not specific addresses). No personal information is stored, 
            and the data is used solely for understanding the global reach of The Last Axiom series.</p>
        </div>

        <!-- Entry buttons -->
        <div class="entry-buttons" id="entryButtons">
            <a href="Main-page.html" class="entry-button enter-button" id="enterButton" onclick="enterSite(event)">
                <svg class="button-icon" viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                I Accept the Risk
            </a>
            <a href="https://www.google.com" class="entry-button escape-button">
                <svg class="button-icon" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
                Escape to Safety
            </a>
        </div>
    </div>

    <script>
        // FIXED: Use correct Google Apps Script URL for visitor tracking
        const TRACKING_URL = 'https://script.google.com/macros/s/AKfycbx9yDuqREJtjsfzhQWBV1kjMGM4vfxRrbBVjIWPcJZZHC-SwTkgkpLXuN58GQpt9Q9b8w/exec';
        
        // Track visitor on page load
        document.addEventListener('DOMContentLoaded', function() {
            trackVisitor();
            setupKonamiCode();
        });

        // FIXED: Use the correct visitor tracking format
        async function sendTrackingData(data) {
            try {
                const formData = new FormData();
                formData.append('data', JSON.stringify(data));
                
                const response = await fetch(TRACKING_URL, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    console.log('Tracking successful:', data.action);
                } else {
                    console.log('Tracking failed:', result.error);
                }
                
                return result;
            } catch (error) {
                console.log('Tracking error:', error.message);
                return { success: false, error: error.message };
            }
        }

        async function trackVisitor() {
            try {
                // Get visitor's IP and location info
                const ipResponse = await fetch('https://ipapi.co/json/');
                const ipData = await ipResponse.json();
                
                // FIXED: Use proper visitor tracking format with action field
                const visitorData = {
                    action: 'trackVisitor',  // This tells the script to use visitor tracking
                    ip: ipData.ip || 'unknown',
                    country: ipData.country_name || 'unknown',
                    region: ipData.region || 'unknown',
                    city: ipData.city || 'unknown',
                    timestamp: new Date().toLocaleString(),
                    userAgent: navigator.userAgent || 'unknown',
                    referrer: document.referrer || 'direct'
                };

                const result = await sendTrackingData(visitorData);
                
                if (result.success) {
                    console.log('Visitor tracked successfully:', ipData.country_name, ipData.city);
                } else {
                    console.log('Visitor tracking failed:', result.error);
                }
            } catch (error) {
                console.log('Tracking failed:', error.message);
            }
        }

        async function enterSite(event) {
            event.preventDefault();
            
            const container = document.getElementById('warningContainer');
            
            // Add entering state
            container.classList.add('entering');
            
            // FIXED: Use proper entry tracking format with action field
            try {
                const entryData = {
                    action: 'trackEntry',  // This tells the script to use entry tracking
                    timestamp: new Date().toLocaleString(),
                    page: 'main-site-entry'
                };

                const result = await sendTrackingData(entryData);
                
                if (result.success) {
                    console.log('Entry tracked successfully');
                } else {
                    console.log('Entry tracking failed:', result.error);
                }
            } catch (error) {
                console.log('Entry tracking error:', error.message);
            }

            // Dramatic pause
            setTimeout(() => {
                window.location.href = 'Main-page.html';
            }, 2000);
        }

        // Konami Code Easter Egg
        function setupKonamiCode() {
            const konamiCode = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]; // ↑↑↓↓←→←→BA
            let userInput = [];
            
            document.addEventListener('keydown', function(e) {
                userInput.push(e.keyCode);
                
                if (userInput.length > konamiCode.length) {
                    userInput.shift();
                }
                
                if (JSON.stringify(userInput) === JSON.stringify(konamiCode)) {
                    activateEasterEgg();
                }
            });
        }

        function activateEasterEgg() {
            const container = document.getElementById('warningContainer');
            
            // Create success flash overlay
            const successFlash = document.createElement('div');
            successFlash.className = 'success-flash';
            document.body.appendChild(successFlash);
            
            // Start fireworks immediately
            createFireworksShow();
            
            // Play triumphant sound
            playTriumphantSound();
            
            // Apply reality shift after brief delay
            setTimeout(() => {
                container.classList.add('konami-activated');
                
                // Change text content
                const title = document.querySelector('.warning-title');
                title.innerHTML = '🌌 COSMIC CONSCIOUSNESS ACTIVATED 🌌';
                
                const subtitle = document.querySelector('.warning-subtitle');
                subtitle.innerHTML = 'The universe acknowledges your dedication to the code';
                
                // Add special achievement message
                const disclaimer = document.querySelector('.cosmic-disclaimer');
                disclaimer.innerHTML = `
                    <p><strong>🎮 ACHIEVEMENT UNLOCKED:</strong> You've discovered the Konami Code!</p>
                    <p>Derek would be proud. You clearly understand that some things in the universe 
                    follow patterns that transcend normal reality. In The Last Axiom series, 
                    characters discover that the universe itself might be running on code—and 
                    sometimes, if you know the right sequence, reality responds.</p>
                    <p><em>Welcome, fellow pattern-seeker. You're ready for what lies ahead.</em></p>
                `;
            }, 500);

            // Show the advanced user popup after fireworks settle
            setTimeout(() => {
                showAdvancedUserPopup();
            }, 2000);
            
            // Reset everything after extended time
            setTimeout(() => {
                container.classList.remove('konami-activated');
                successFlash.remove();
                
                // Reset text back to original
                const title = document.querySelector('.warning-title');
                title.innerHTML = '⚠️ REALITY DISTORTION WARNING ⚠️';
                
                const subtitle = document.querySelector('.warning-subtitle');
                subtitle.innerHTML = 'You are about to enter a universe where the laws of physics are... negotiable';
                
                const disclaimer = document.querySelector('.cosmic-disclaimer');
                disclaimer.innerHTML = `
                    <p><strong>COSMIC DISCLAIMER:</strong> The following website contains 15 interconnected stories where:</p>
                    <ul style="text-align: left; margin: 1rem 0; padding-left: 2rem;">
                        <li>Professors discover that π might not always equal 3.14159...</li>
                        <li>Pac-Man becomes humanity's first contact with cosmic intelligence</li>
                        <li>Golf putts refuse to follow curved spacetime</li>
                        <li>Nuclear physicists fall in love while the universe gets a software update</li>
                        <li>Reality itself starts taking suggestions</li>
                    </ul>
                    <p><em>Reader discretion is advised. Side effects may include: existential wonder, 
                    uncontrollable theorizing about consciousness, and the sudden urge to look up at the stars 
                    and wonder if they're looking back.</em></p>
                `;
            }, 15000); // Extended time to allow for popup display
        }

        function showAdvancedUserPopup() {
            const warningContent = document.querySelector('.warning-content');
            
            // Create popup
            const popup = document.createElement('div');
            popup.className = 'advanced-user-popup';
            popup.innerHTML = `
                <div class="popup-timer" id="popupTimer">10</div>
                <div class="popup-header">/// ADVANCED USER DETECTED ///</div>
                <div class="popup-message">
                    You have demonstrated a higher level of computing skill than the average reader. 
                    At some point you will wonder what the number <span class="popup-number">12757982</span> represents. 
                    I will hide a special clue just for you somewhere in the website. 
                    Hope you're good enough to find it!
                </div>
            `;
            
            warningContent.appendChild(popup);
            
            // Show popup with animation
            setTimeout(() => {
                popup.classList.add('show');
            }, 100);
            
            // Start countdown timer
            let timeLeft = 10;
            const timerElement = popup.querySelector('#popupTimer');
            
            const countdown = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                }
            }, 1000);
            
            // Hide and remove popup after 10 seconds
            setTimeout(() => {
                popup.classList.add('hide');
                setTimeout(() => {
                    if (popup.parentNode) {
                        popup.remove();
                    }
                }, 400);
            }, 10000);
        }

        function createFireworksShow() {
            const overlay = document.getElementById('fireworksOverlay');
            overlay.classList.add('active');
            
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8', '#f7dc6f'];
            const fireworkCount = 12;
            
            // Create multiple fireworks with staggered timing
            for (let i = 0; i < fireworkCount; i++) {
                setTimeout(() => {
                    createSingleFirework(overlay, colors);
                }, i * 300);
            }
            
            // Hide overlay after show
            setTimeout(() => {
                overlay.classList.remove('active');
                // Clean up any remaining firework elements
                overlay.innerHTML = '';
            }, 4000);
        }

        function createSingleFirework(container, colors) {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * (window.innerHeight * 0.6) + window.innerHeight * 0.1;
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            // Create launch trail
            const trail = document.createElement('div');
            trail.className = 'firework-trail';
            trail.style.left = x + 'px';
            trail.style.top = (y + 60) + 'px';
            trail.style.background = `linear-gradient(to top, ${color}, transparent)`;
            container.appendChild(trail);
            
            // Create main explosion after trail
            setTimeout(() => {
                createExplosion(container, x, y, color);
            }, 800);
            
            // Clean up trail
            setTimeout(() => {
                if (trail.parentNode) trail.remove();
            }, 1000);
        }

        function createExplosion(container, x, y, color) {
            const particleCount = 20;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework';
                
                const angle = (Math.PI * 2 * i) / particleCount;
                const velocity = 50 + Math.random() * 50;
                const dx = Math.cos(angle) * velocity;
                const dy = Math.sin(angle) * velocity;
                
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.background = color;
                particle.style.boxShadow = `0 0 6px ${color}`;
                
                // Add random motion
                particle.style.setProperty('--dx', dx + 'px');
                particle.style.setProperty('--dy', dy + 'px');
                
                container.appendChild(particle);
                
                // Create sparkles around each particle
                if (Math.random() < 0.3) {
                    setTimeout(() => {
                        createSparkles(container, x + dx/2, y + dy/2, color);
                    }, 500);
                }
                
                // Clean up particle
                setTimeout(() => {
                    if (particle.parentNode) particle.remove();
                }, 2000);
            }
        }

        function createSparkles(container, x, y, color) {
            const sparkleCount = 8;
            
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 20 + Math.random() * 30;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;
                
                sparkle.style.left = x + 'px';
                sparkle.style.top = y + 'px';
                sparkle.style.setProperty('--dx', dx + 'px');
                sparkle.style.setProperty('--dy', dy + 'px');
                
                container.appendChild(sparkle);
                
                setTimeout(() => {
                    if (sparkle.parentNode) sparkle.remove();
                }, 1500);
            }
        }

        function playTriumphantSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create a triumphant chord sequence
                const frequencies = [523.25, 659.25, 783.99]; // C5, E5, G5
                const duration = 0.8;
                
                frequencies.forEach((freq, index) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = freq;
                    oscillator.type = 'sine';
                    
                    const startTime = audioContext.currentTime + (index * 0.1);
                    gainNode.gain.setValueAtTime(0, startTime);
                    gainNode.gain.linearRampToValueAtTime(0.1, startTime + 0.01);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
                    
                    oscillator.start(startTime);
                    oscillator.stop(startTime + duration);
                });
                
                // Add some sparkly high notes
                setTimeout(() => {
                    [1046.5, 1318.5, 1567.98].forEach((freq, index) => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        
                        osc.frequency.value = freq;
                        osc.type = 'sine';
                        
                        const time = audioContext.currentTime + (index * 0.15);
                        gain.gain.setValueAtTime(0, time);
                        gain.gain.linearRampToValueAtTime(0.05, time + 0.01);
                        gain.gain.exponentialRampToValueAtTime(0.001, time + 0.4);
                        
                        osc.start(time);
                        osc.stop(time + 0.4);
                    });
                }, 300);
                
            } catch (e) {
                // Ignore audio errors - not all browsers support Web Audio API
                console.log('Audio not supported');
            }
        }

        // Add some random "system glitches"
        setInterval(() => {
            if (Math.random() < 0.05) { // 5% chance every interval
                document.body.style.filter = 'hue-rotate(10deg)';
                setTimeout(() => {
                    document.body.style.filter = 'none';
                }, 200);
            }
        }, 5000);
    </script>
</body>
</html>
