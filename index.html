<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warning: Entering The Last Axiom Universe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(45deg, #0a0a0f 0%, #1a1a2e 25%, #16213e 50%, #1a1a2e 75%, #0a0a0f 100%);
            min-height: 100vh;
            color: #e8e8e8;
            overflow-x: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Quantum field background effect */
        .quantum-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(255, 0, 0, 0.15) 0%, transparent 40%),
                        radial-gradient(circle at 70% 80%, rgba(0, 255, 255, 0.15) 0%, transparent 40%);
            pointer-events: none;
            z-index: -1;
            animation: quantum-flicker 10s infinite alternate;
        }

        @keyframes quantum-flicker {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

        .container {
            text-align: center;
            padding: 2rem;
            max-width: 800px;
            margin: auto;
            position: relative;
            z-index: 1;
            transition: all 0.5s ease;
        }

        .warning-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #ff3333;
            text-shadow: 0 0 10px #ff3333, 0 0 20px #ff3333;
            letter-spacing: 2px;
            animation: glitch-text 2s infinite alternate;
        }

        @keyframes glitch-text {
            0% { text-shadow: 0 0 10px #ff3333, 0 0 20px #ff3333; }
            50% { text-shadow: 0 0 15px #33ff33, 0 0 25px #33ff33; }
            100% { text-shadow: 0 0 10px #3333ff, 0 0 20px #3333ff; }
        }

        .warning-subtitle {
            font-style: italic;
            font-size: 1.2rem;
            color: #a0a0a0;
            margin-bottom: 2rem;
        }

        .warning-text {
            line-height: 1.6;
            text-align: left;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .blinking-cursor {
            font-size: 1.5rem;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .cosmic-disclaimer {
            margin-top: 3rem;
            font-size: 0.9rem;
            color: #6a6a6a;
            border-top: 1px solid #333;
            padding-top: 2rem;
            text-align: center;
        }

        .konami-activated .warning-title {
            color: #33ff33;
            text-shadow: 0 0 10px #33ff33, 0 0 20px #33ff33;
        }
        
        /* New Styles for Messaging Section */
        #messaging-container {
            width: 100%;
            max-width: 600px;
            margin: 4rem auto;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #ff3333;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(255, 51, 51, 0.5);
        }

        #message-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #message-input {
            width: 100%;
            height: 100px;
            padding: 1rem;
            background: #2e1a1a;
            border: 1px solid #ff3333;
            color: #e8e8e8;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
        }

        #send-button {
            background-color: #ff3333;
            color: white;
            padding: 0.75rem;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #send-button:hover {
            background-color: #ff6666;
        }
        
        #response-message {
            margin-top: 1rem;
            font-style: italic;
            color: #ff3333;
        }

        #message-board {
            margin-top: 2rem;
            border-top: 1px dashed #6a6a6a;
            padding-top: 2rem;
        }

        .message-entry {
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-left: 3px solid #ff3333;
        }

        .message-content {
            font-style: italic;
            font-size: 1.1rem;
            white-space: pre-wrap;
        }

        .message-timestamp {
            font-size: 0.8rem;
            color: #a0a0a0;
            margin-top: 0.5rem;
        }
        
    </style>
</head>
<body>
    <div class="quantum-field"></div>
    <div class="container" id="main-container">
        <h1 class="warning-title">WARNING: SYSTEM INTEGRITY COMPROMISED</h1>
        <p class="warning-subtitle">_ACCESSING: THE LAST AXIOM UNIVERSE_</p>
        <div class="warning-text">
            <p><strong>Initiating Universal Connection Protocol...</strong></p>
            <p>This is a controlled simulation. All data is for informational purposes only. Do not attempt to reverse-engineer or re-create this process in an uncontrolled environment. The universe is a delicate system; unintended alterations can have cascading consequences.</p>
            <p>Accessing reality signature:<span class="blinking-cursor">_</span></p>
            <p>Status: <span id="status-text">INITIALIZING</span></p>
        </div>
        <div class="cosmic-disclaimer">
            <p>Unauthorized access to universal constants is a breach of protocol. Proceed with caution.</p>
        </div>
    </div>
    
    <div id="messaging-container">
        <h2>Send a Message to the Creator</h2>
        <form id="message-form">
            <textarea id="message-input" placeholder="Type your message here..." required></textarea>
            <button id="send-button" type="submit">SEND TRANSMISSION</button>
        </form>
        <p id="response-message"></p>
        <h3>Incoming Transmissions:</h3>
        <div id="message-board">
            <p style="text-align: center;">Loading messages...</p>
        </div>
    </div>
    
    <script>
        // Konami Code Detection
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;
        document.addEventListener('keydown', (e) => {
            if (e.key === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    activateKonamiMode();
                    konamiIndex = 0; // Reset for future use
                }
            } else {
                konamiIndex = 0;
            }
        });

        function activateKonamiMode() {
            const container = document.getElementById('main-container');
            container.classList.add('konami-activated');
            const title = document.querySelector('.warning-title');
            title.innerHTML = 'ðŸŒŒ COSMIC CONSCIOUSNESS ACTIVATED ðŸŒŒ';
            const subtitle = document.querySelector('.warning-subtitle');
            subtitle.innerHTML = 'The universe acknowledges your dedication to the code';
            const disclaimer = document.querySelector('.cosmic-disclaimer');
            disclaimer.innerHTML = `
                <p><strong>ðŸŽ® ACHIEVEMENT UNLOCKED:</strong> You've discovered the Konami Code!</p>
                <p>Derek would be proud. You clearly understand that some things in the universe 
                follow patterns that transcend normal reality. In The Last Axiom series, 
                characters discover that the universe itself might be running on codeâ€”and 
                sometimes, if you know the right sequence, reality responds.</p>
                <p><em>Welcome, fellow pattern-seeker. You're ready for what lies ahead.</em></p>
            `;
            setTimeout(() => {
                container.classList.remove('konami-activated');
            }, 3000);
        }

        // Add some random "system glitches"
        setInterval(() => {
            if (Math.random() < 0.05) { // 5% chance every interval
                document.body.style.filter = 'hue-rotate(10deg)';
                setTimeout(() => {
                    document.body.style.filter = 'none';
                }, 200);
            }
        }, 5000);

        // START OF NEW MESSAGING SCRIPT FROM NANCY-BACKDOOR.HTML
        // You MUST replace the placeholder with YOUR actual Google Apps Script URL.
        const scriptUrl = "https://script.google.com/macros/s/AKfycbx9yDuqREJtjsfzhQWBV1kjMGM4vfxRrbBVjIWPcJZZHC-SwTkgkpLXuN58GQpt9Q9b8w/exec"; // REPLACE THIS URL

        const messageForm = document.getElementById('message-form');
        const messageInput = document.getElementById('message-input');
        const responseMessage = document.getElementById('response-message');
        const messageBoard = document.getElementById('message-board');

        let lastMessageCount = 0;
        let autoRefreshInterval;

        messageForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const message = messageInput.value.trim();
            if (message === '') return;
            
            responseMessage.textContent = 'Sending message...';
            const data = { action: 'addMessage', message: message };
            
            try {
                const response = await fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    cache: 'no-cache',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                // The no-cors mode prevents us from reading the response.
                // We just assume it worked and give a positive message.
                console.log("Message sent (no-cors mode). Assuming success.");
                responseMessage.textContent = 'Transmission successful. Awaiting reply.';
                messageInput.value = '';
                await fetchMessages(); // Refresh messages immediately
                
            } catch (error) {
                console.error('Error sending message:', error);
                responseMessage.textContent = 'Error: Could not send transmission.';
            }
        });

        async function fetchMessages() {
            try {
                const url = new URL(scriptUrl);
                url.searchParams.append('action', 'getMessages');

                const response = await fetch(url.toString(), {
                    method: 'GET',
                    cache: 'no-cache'
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.success && data.messages) {
                    const messages = data.messages;
                    if (messages.length > lastMessageCount) {
                        playNotificationSound();
                        lastMessageCount = messages.length;
                    }
                    displayMessages(messages);
                } else {
                    console.error('Failed to fetch messages:', data);
                    messageBoard.innerHTML = '<p style="text-align: center;">Error loading messages. Check script URL and deployment.</p>';
                }
            } catch (error) {
                console.error('Failed to fetch messages:', error);
                messageBoard.innerHTML = '<p style="text-align: center;">Error connecting to the Google Sheets API.</p>';
            }
        }

        function displayMessages(messages) {
            messageBoard.innerHTML = '';
            if (messages.length === 0) {
                messageBoard.innerHTML = '<p style="text-align: center;">No transmissions received yet.</p>';
                return;
            }
            messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message-entry';
                messageDiv.innerHTML = `
                    <p class="message-content">${escapeHtml(msg.message)}</p>
                    <p class="message-timestamp">Received: ${msg.timestamp}</p>
                `;
                messageBoard.prepend(messageDiv);
            });
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function playNotificationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.frequency.value = 600;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.4);
            } catch (e) {
                // Ignore audio errors
            }
        }

        // Initialize and start auto-refresh
        window.addEventListener('load', () => {
            fetchMessages(); // Initial fetch
            autoRefreshInterval = setInterval(fetchMessages, 5000); // Refresh every 5 seconds
        });

        // Clean up on page unload
        window.addEventListener('beforeunload', () => {
            clearInterval(autoRefreshInterval);
        });
        
    </script>
</body>
</html>
